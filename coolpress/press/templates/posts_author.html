{% extends 'base.html' %}

<!-- Tab title -->
{% block title %}Post - {{post.title}}{% endblock %}

<!-- Data for the navbar -->
{% block navbar %}
	{% with header=post.title back_btn_url="posts-list" header_btn_text="New Post" header_btn_url="post-add" %}
		{% include 'navbar.html' %}
	{% endwith %}
{% endblock %}

<!-- Main Page Content -->
{% block content %}
    <div class="d-flex justify-content-between align-items-center">
        <p>Showing post with ID: <b>{{post.id}}</b></p>
        <div class="text-right">
            {% if user.is_authenticated and cooluser == post.author and post.id %}
                <a class="btn btn-info new-post-btn" role="button" href="{% url 'post-update' post.id %}">
                    Update Post
                </a>
            {% endif %}
        </div>
    </div>

    <div class="card mb-3 post">
        <div class="row no-gutters">
            <div class="{% if post.image_link %}col-md-12{% else %}col-md-12{% endif %}">
                <div class="card-header">
                    <a>#{{post.category.slug}}</a>
                </div>
                <div class="card-body">
                    <p class="card-text"><small class="text-muted">{{post.last_update}}</small></p>
                    <p class="card-text">{{post.body|urlize}}</p>
                    <p class="card-text">
                        <span>By:</span>
                        <b>
                            <a href="{% url 'post-author' post.author.user.id %}" class="text-body text-underline-hover">
                                {{post.author.user.username}}
                            </a>
                        </b>
                    </p>
                </div>
            </div>
            {% if post.image_link %}
            <div class="col-md-12 post-image-box">
                <img style="width: 100%; height: 100%; object-fit: cover;" class="post-image" src="{{post.image_link}}" alt="{{post.title}}">
            </div>
            {% endif %}
        </div>
    </div>
{% endblock %}